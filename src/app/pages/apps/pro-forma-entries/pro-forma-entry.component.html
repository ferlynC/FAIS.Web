<vex-secondary-toolbar current="Edit Pro Forma Entry">
  <vex-breadcrumbs [crumbs]="['System Management', 'Pro Forma Entry', 'Edit Pro Forma Entry']" class="flex-auto"></vex-breadcrumbs>
  <button class="ml-2" color="primary" mat-icon-button type="button">
    <mat-icon svgIcon="mat:more_vert"></mat-icon>
  </button>
</vex-secondary-toolbar>
<div class="p-gutter container" [class.container]="layoutCtrl.value === 'boxed'" [class.px-gutter]="layoutCtrl.value === 'fullwidth'">
  <div class="flex flex-col sm:flex-row gap-4">
    <div class="card flex-auto">
      <div class="px-6 py-4 border-b flex items-center gap-2">
        <button [ngClass]="['!bg-green', '!text-contrast-white']" mat-raised-button type="button" (click)="save()">
          <mat-icon class="ltr:-ml-1 rtl:-mr-1 ltr:mr-2 rtl:ml-2" svgIcon="mat:archive"></mat-icon> Save
        </button>
        <button color="primary" mat-stroked-button type="button" [routerLink]="['/apps/proformaentry']">
          <mat-icon class="ltr:-ml-1 rtl:-mr-1 ltr:mr-2 rtl:ml-2" svgIcon="mat:close"></mat-icon> Close
        </button>
      </div>
      <div class="px-6 py-4 flex flex-col">
        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="5px">
          <form [formGroup]="form" class="flex flex-col flex-auto form-container">
            <div class="flex flex-col sm:flex-row sm:gap-4">
              <mat-form-field appearance="fill" class="flex-auto">
                <mat-label>Pro-Forma Entry Type</mat-label>
                <input matInput formControlName="type" required>
                <mat-error *ngIf="formControls.type.touched && formControls.type.invalid">
                  <span *ngIf="formControls.type.getError('required')">
                    Pro-forma entry type is required
                  </span>
                </mat-error>
              </mat-form-field>
            </div>
            <div class="flex flex-col sm:flex-row sm:gap-4">
              <mat-form-field appearance="fill" class="flex-auto">
                <mat-label> Pro-Forma Entry Description</mat-label>
                <input matInput formControlName="description" required>
                <mat-error *ngIf="formControls.description.touched && formControls.description.invalid">
                  <span *ngIf="formControls.description.getError('required')">
                    Pro-forma entry description is required
                  </span>
                </mat-error>
              </mat-form-field>
            </div>
            <div class="flex flex-col sm:flex-row sm:gap-4">
              <mat-slide-toggle color="accent" labelPosition="before" formControlName="isActive" (change)="onToggleStatus($event)">
                {{ statusLabel }}
              </mat-slide-toggle>
            </div>
            <blockquote fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="5px" [style.marginTop.px]="30">
              <span fxFlex>
                <strong>Created By</strong>: {{ createdBy }}
              </span>
              <span fxFlex>
                <strong>Date Created</strong>: {{ createdAt | date: 'MM/dd/yyyy hh:mm a' }}
              </span>
              <span fxFlex>
                <strong>Modified By</strong>: {{ updatedBy }}
              </span>
              <span fxFlex>
                <strong>Date Modified</strong>: {{ updatedAt ? (updatedAt | date: 'MM/dd/yyyy hh:mm a') : 'N/A' }}
              </span>
            </blockquote>
          </form>
        </div>
      </div>
<hr />
      <div class="card">
        <ngx-datatable
          #mydatatable
          class="material"
          [headerHeight]="50"
          [limit]="5"
          [columnMode]="ColumnMode.force"
          [footerHeight]="50"
          rowHeight="auto"
          [rows]="rows"
        >
        <ng-template let-column ngFor [ngForOf]="columns">
          <ngx-datatable-column name="{{column.name}}">
            <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
              <span
                title="Double click to edit"
                (dblclick)="editing[rowIndex + '-' + column.id] = true"
                *ngIf="!editing[rowIndex + '-' + column.id]"
                class="c-datatable-value-text"
              >
                {{ value || '-'}}
              </span>
              <input
                autofocus
                (blur)="updateValue($event, column.id, rowIndex)"
                *ngIf="editing[rowIndex + '-' + column.id]"
                type="text"
                [value]="value"
              />
            </ng-template>
          </ngx-datatable-column>
      </ng-template>
        </ngx-datatable>
      </div>
    </div>
  </div>
</div>
